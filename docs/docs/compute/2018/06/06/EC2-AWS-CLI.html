<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>EC2 AWS CLI | AWS Developer Associate Notes</title>
<meta name="generator" content="Jekyll v3.8.2" />
<meta property="og:title" content="EC2 AWS CLI" />
<meta name="author" content="Eshan Shafeeq" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In order to get aws cli running, you need to create a user in IAM with programatic access. Save the credentials.csv file. You only get to download this once. Only give user the permission for the resource you want the user to access, and nothing more." />
<meta property="og:description" content="In order to get aws cli running, you need to create a user in IAM with programatic access. Save the credentials.csv file. You only get to download this once. Only give user the permission for the resource you want the user to access, and nothing more." />
<link rel="canonical" href="https://diehard073055.github.io//sturdy-carnival/compute/2018/06/06/EC2-AWS-CLI.html" />
<meta property="og:url" content="https://diehard073055.github.io//sturdy-carnival/compute/2018/06/06/EC2-AWS-CLI.html" />
<meta property="og:site_name" content="AWS Developer Associate Notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-06-06T00:00:00+10:00" />
<script type="application/ld+json">
{"headline":"EC2 AWS CLI","description":"In order to get aws cli running, you need to create a user in IAM with programatic access. Save the credentials.csv file. You only get to download this once. Only give user the permission for the resource you want the user to access, and nothing more.","datePublished":"2018-06-06T00:00:00+10:00","dateModified":"2018-06-06T00:00:00+10:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://diehard073055.github.io//sturdy-carnival/compute/2018/06/06/EC2-AWS-CLI.html"},"url":"https://diehard073055.github.io//sturdy-carnival/compute/2018/06/06/EC2-AWS-CLI.html","author":{"@type":"Person","name":"Eshan Shafeeq"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/sturdy-carnival/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://diehard073055.github.io//sturdy-carnival/feed.xml" title="AWS Developer Associate Notes" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/sturdy-carnival/">AWS Developer Associate Notes</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/sturdy-carnival/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">EC2 AWS CLI</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-06-06T00:00:00+10:00" itemprop="datePublished">Jun 6, 2018
      </time>â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Eshan Shafeeq</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>In order to get aws cli running, you need to create a user in IAM with programatic access. Save the <code class="highlighter-rouge">credentials.csv</code> file. <strong>You only get to download this once</strong>. Only give user the permission for the resource you want the user to access, and nothing more.</p>

<p>After spinning up a EC2 instance, run the following command.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">ls</span>
</code></pre></div></div>

<p>It should give you an error saying, <code class="highlighter-rouge">unable to locate credentails. You can configure credentials by running "aws configure".</code> So run the following command.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws configure
</code></pre></div></div>

<p>Now enter the <code class="highlighter-rouge">Access Key ID</code> and the <code class="highlighter-rouge">Secret Access Key</code> you downloaded when you created the IAM user with the programatic access. After that try the following command again.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">ls</span>
</code></pre></div></div>

<p>Now it should show you a list of all the buckets you have created on s3. If you dont have any buckets it will be empty. You can create a bucket with the following command.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 mb s3://&lt;enter your bucket name&gt;
</code></pre></div></div>

<blockquote>
  <p>Remember that your bucketname has to be unique across all the buckets that has ever been created in aws.</p>
</blockquote>

<p>In order for you to get help on a specific aws service, you can type <code class="highlighter-rouge">aws [service] help</code>. So for example to get help about s3.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">help</span>
</code></pre></div></div>

<p>To get help on a command of the service you can type <code class="highlighter-rouge">aws [service] [command] help</code>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 mb <span class="nb">help</span>
</code></pre></div></div>

<p>Now since we configured our aws cli to be using the credentials on the ec2 instance. This is risky since if someone did hack in they will use your credentials to do nasty things to your s3 buckets or more. The credentials are stored in <code class="highlighter-rouge">~/.aws/credentials</code>. Dont ever store these credentials in github, in your projects. The best way to do programatic resource management with scripts is to use an ec2 with the right role attached to it. And then ssh-ing into the machine. And then you can run whatever script you wanted to run.</p>

<p>In order to list all the running ec2 instances, run the command.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-instances
</code></pre></div></div>

<p>You will see bunch of information here. and then in order to terminate any running instance type <code class="highlighter-rouge">aws ec2 terminate-instances</code>. You can get the instance id from the <code class="highlighter-rouge">aws describe-instances</code> command.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws ec2 describe-instances <span class="nt">--instance-ids</span> <span class="o">[</span>enter instance <span class="nb">id </span>here]
</code></pre></div></div>

<p>make sure you delete the user that you created for this unless you have specific access for you to do something simple on your own machine. To do this the safe way create a role with the required access in IAM. In situations where you have multiple ec2 instances with the credentials file, and the credentials files got leaked. You will need to delete the file and replace the in everysingle ec2 instance. Which can be done programatically, its still ugly. So the best way is to use roles on those ec2 instances.</p>

<p>So in the case where you want to have an ec2 instance do a bunch of tasks with s3. You should create the s3 admin access role and attach it to your ec2 instance. Also remember <strong>roles are available globally, you cannot create a role for a specific region</strong>. <em>So after you have created an instance with the right role attached</em>. You could double check on all the possible actions that is doable from this ec2 instance by going on to polices from the left side panel. Click on policies -&gt; permissions. Here you can view both the json and gui version of all the actions that have been issued for the ec2 instance.</p>

<blockquote>
  <p>You can click on a running instance -&gt; Actions -&gt; Instance Settings -&gt; Attach / Replace IAM role, If you want to attach another IAM role.</p>
</blockquote>

<p>If you have added the S3 access to the role you attached to the ec2 instance. You can try.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 <span class="nb">ls</span>
</code></pre></div></div>
<p>and now it should just work with out asking you to configure things. Even if you check the directory <code class="highlighter-rouge">~/.aws</code> it should be empty. So even if your ec2 instance got compromised, you dont have to delete your access credentials.</p>


  </div><a class="u-url" href="/sturdy-carnival/compute/2018/06/06/EC2-AWS-CLI.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/sturdy-carnival/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">AWS Developer Associate Notes</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">AWS Developer Associate Notes</li><li><a class="u-email" href="mailto:eshanshafeeq073055@gmail.com">eshanshafeeq073055@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/DieHard073055"><svg class="svg-icon"><use xlink:href="/sturdy-carnival/assets/minima-social-icons.svg#github"></use></svg> <span class="username">DieHard073055</span></a></li><li><a href="https://www.twitter.com/diehard073055"><svg class="svg-icon"><use xlink:href="/sturdy-carnival/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">diehard073055</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Blog to keep track of what i have been studying for AWS Developer Associate Course. Also will be referrence to study before the exam.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
