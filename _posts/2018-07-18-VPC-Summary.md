---
  layout: post
  title: VPC Summary
  subtitle: 
  tags: [ networking, vpc, routes, security, subnet, nat ]
  categories: networking
  author: Eshan Shafeeq
  header_img: 
---

### NAT Instances
* When creating NAT instance, Disable Source/Destination check on instances.
* NAT instance must be in a public subnet.
* There must be a route out of the private subnet to the NAT instance, in order for this to work.
* The amount of traffic that NAT instances can support depends on the instance size. If you are bottlenecking, increase the instance size.
* You can create high availability using Autoscaling Groups, multiple subnets in different AZ's, and a script to automate failover.
* NAT instances are always behind a security group.

### NAT Gateways
* Preferred by the enterprise group.
* Scale up automatically upto 10GBps.
* No need to patch.
* Not associated with security groups.
* Automatically assigned with a public ip address.
* Remember to update your route tables.
* No need to disable Source / Destination checks.
* More secure than using NAT instances.

### Network ACLs
* Your VPC automatically comes with a default ACL, and by default it allows all inbound and outbound traffic.
* You can create custom network ACLs. And by default custom ACL denies all inbound and outbound traffic until you add rules.
* Each subnet in your VPC must be associated with a network ACL. If you dont explicitly associate a subnet with a network ACL, the subnet is automatically associated with the default network ACL.
* You can associate a network ACL with multiple subnets; however, a subnet can be associated with only one network ACL at a time. When you associate a network ACL with a subnet, the previous association is removed.
* Network ACLs contain a numbered list of rules that is evaluated in order, starting with lowest numbered rule.
* Network ACLs have seperate inbound and outbound rules, and each rule can either allow or deny traffic.
* Network ACLs are stateless, responses to allow inbound traffic are subjected to the rules for outbound traffic. (vice versa).
* Block IP addresses using NACLs

### Application Load Balancers
* You will need at least 2 public subnets in order to deploy an application load balancer.

### VPC Flow Logs
* You cannot enable flow logs for VPCs that are peered with your VPC unless the peer VPC is in your account.
* You cannot tag a flow log.
* After youve created a flow log, you cannot change the configuration; for example, you cannot associate a different IAM rule with the current flow log.
* Not all IP traffic is monitored
    * Traffic generated by instances when they contact Amazon DNS server. If you use your own DNS server, then all traffic to that DNS server is logged.
    * Traffic generated by a Windows instance for Amazon Windows license activation.
    * Traffic to and from 169.254.169.254 for instance metadata.
    * DHCP traffic.
    * Traffic to the reserved IP address for the default VPC router.

